-- DROP SCHEMA dbo;

CREATE SCHEMA dbo;
-- ecommerce.dbo.sysdiagrams definition

-- Drop table

-- DROP TABLE ecommerce.dbo.sysdiagrams;

CREATE TABLE ecommerce.dbo.sysdiagrams (
	name sysname COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	principal_id int NOT NULL,
	diagram_id int IDENTITY(1,1) NOT NULL,
	version int NULL,
	definition varbinary(MAX) NULL,
	CONSTRAINT PK__sysdiagr__C2B05B61834131F1 PRIMARY KEY (diagram_id),
	CONSTRAINT UK_principal_name UNIQUE (principal_id,name)
);


-- ecommerce.dbo.tb_account definition

-- Drop table

-- DROP TABLE ecommerce.dbo.tb_account;

CREATE TABLE ecommerce.dbo.tb_account (
	customerId int IDENTITY(1,1) NOT NULL,
	username nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	password nvarchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	phone varchar(30) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	email varchar(150) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	address nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	fullName nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	avatar varchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	createDate datetime NULL,
	modifyDate datetime NULL,
	[role] varchar(20) COLLATE SQL_Latin1_General_CP1_CI_AS NULL
);


-- ecommerce.dbo.tb_category definition

-- Drop table

-- DROP TABLE ecommerce.dbo.tb_category;

CREATE TABLE ecommerce.dbo.tb_category (
	categoryId int IDENTITY(1,1) NOT NULL,
	name nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	unit int NOT NULL
);


-- ecommerce.dbo.tb_order definition

-- Drop table

-- DROP TABLE ecommerce.dbo.tb_order;

CREATE TABLE ecommerce.dbo.tb_order (
	orderId int IDENTITY(1,1) NOT NULL,
	orderCode varchar(50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	totalPrice int NOT NULL,
	createDate datetime NULL,
	modifyDate datetime NULL,
	customerId int NULL
);


-- ecommerce.dbo.tb_order_detail definition

-- Drop table

-- DROP TABLE ecommerce.dbo.tb_order_detail;

CREATE TABLE ecommerce.dbo.tb_order_detail (
	orderDetailId int IDENTITY(1,1) NOT NULL,
	quantity int NOT NULL,
	price int NOT NULL,
	createDate datetime NULL,
	modifyDate datetime NULL,
	orderId int NOT NULL,
	productId int NOT NULL
);


-- ecommerce.dbo.tb_payment definition

-- Drop table

-- DROP TABLE ecommerce.dbo.tb_payment;

CREATE TABLE ecommerce.dbo.tb_payment (
	paymentId int IDENTITY(1,1) NOT NULL,
	paymentType int NOT NULL,
	accountNo varchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	createDate datetime NULL,
	modifyDate datetime NULL,
	accountName varchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	orderCode varchar(100) COLLATE SQL_Latin1_General_CP1_CI_AS NULL
);


-- ecommerce.dbo.tb_product definition

-- Drop table

-- DROP TABLE ecommerce.dbo.tb_product;

CREATE TABLE ecommerce.dbo.tb_product (
	productId int IDENTITY(1,1) NOT NULL,
	productCode nvarchar(20) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	name nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	quantity int NOT NULL,
	price int NOT NULL,
	status int NULL,
	discount int NULL,
	picture nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	description nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	createDate datetime NULL,
	modifyDate datetime NULL,
	startDateDiscount datetime NULL,
	endDateDiscount datetime NULL,
	categoryId int NOT NULL
);


-- ecommerce.dbo.tb_product_log definition

-- Drop table

-- DROP TABLE ecommerce.dbo.tb_product_log;

CREATE TABLE ecommerce.dbo.tb_product_log (
	productCode varchar(20) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	name nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
	quantity int NOT NULL,
	price int NOT NULL,
	status int NULL,
	discount int NULL,
	picture nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	description nvarchar(255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	createDate datetime NULL,
	startDateDiscount datetime NULL,
	endDateDiscount datetime NULL,
	categoryId int NOT NULL,
	productId int IDENTITY(0,1) NOT NULL
);